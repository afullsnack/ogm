---
import Container from "@components/container.astro";
import Link from "@components/ui/link.astro";
import Dropdown from "./dropdown.astro";
import { Astronav, MenuItems, MenuIcon } from "astro-navbar";
import Icon from "astro-icon";

const menuitems = [
  {
    title: "Features",
    path: "#",
    children: [
      { title: "Action", path: "/" },
      { title: "Another action", path: "#" },
      { title: "Dropdown Submenu", path: "#" },
      { title: "404 Page", path: "/404" },
    ],
  },
  // {
  //   title: "Pricing",
  //   path: "/pricing",
  // },
  {
    title: "About",
    path: "/about",
  },
  {
    title: "Trade Markets",
    path: "/trade",
  },
  {
    title: "Support",
    path: "/contact",
  },
  {
    title: "Terms",
    path: "/terms",
  },
];
---

<Container class:list={["bg-slate-900"]}>
  <header class="flex flex-col lg:flex-row justify-between items-center py-4">
    <Astronav>
      <div class="flex w-full lg:w-auto items-center justify-between">
        <a href="/" class="text-lg"
          ><span class="font-bold text-slate-300">OptGrowth</span><span
            class="text-slate-500">
            Markets</span
          >
        </a>
        <div class="block lg:hidden" id="menu-btn">
          <MenuIcon class="w-6 h-6 font-bold text-gray-400" />
        </div>
      </div>
      <MenuItems
        class="hidden lg:flex lg:mt-0 menu-toggle lg:static lg:p-2 fixed top-10 right-0 left-0 p-10 bg-slate-900 transition-opacity opacity-90">
        <ul class="flex flex-col lg:flex-row lg:gap-3">
          {
            menuitems.map((item, index) => (
              // <>
              //   {item.children && (
              //     <Dropdown
              //       title={item.title}
              //       children={item.children}
              //       lastItem={index === menuitems.length - 1}
              //     />
              //   )}
              // </>
              <>
                {!item.children && (
                  <li>
                    <a
                      href={item.path}
                      class="flex lg:px-3 py-2 text-gray-400 hover:text-gray-900">
                      {item.title}
                    </a>
                  </li>
                )}
              </>
            ))
          }
        </ul>
        <div class="lg:hidden flex items-center mt-3 gap-4">
          <Link href="/user" target="_self" size="md" block>
            CREATE ACCOUNT
          </Link>
          <!-- <Link href="/user" style="muted" block size="md">
            <Icon name="bi:person-circle" class="w-4 h-4" />
          </Link> -->
        </div>
      </MenuItems>
    </Astronav>
    <div>
      <div class="hidden lg:flex items-center gap-4">
        <Link href="/user" size="md" block class="text-xs">CREATE ACCOUNT</Link>
        <Link
          href="/user"
          style="muted"
          block
          class="w-10 h-10 grid items-center justify-center"
          size="md">
          <Icon name="bi:person-circle" class="w-4 h-4" />
        </Link>
      </div>
    </div>
  </header>
</Container>

<script is:inline defer>
const menuButtton = document.getElementById("menu-btn");

console.log("I clicked the menu");

menuButtton?.addEventListener("click", () => {
  console.log("I clicked again");
  [...document.querySelectorAll("menu-toggle")].forEach((element) => {
    console.log("Inside the forEach block");
    element.classList.toggle("hidden");
    element.classList.toggle("opacity-90");
  });
});
</script>
