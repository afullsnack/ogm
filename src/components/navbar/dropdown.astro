---
import { Dropdown as DropdownContainer, DropdownItems } from "astro-navbar";
import { changeAccountType } from "../../stores/dashboard";
const { title } = Astro.props;
const balance = 10000;
const liveBalance = 0;
---

<div class="relative max-w-max lg:w-[400px] w-full z-50">
  <DropdownContainer class="group">
    <button
      class="grid items-start justify-items-start justify-center gap-1 text-gray-200 hover:text-gray-400">
      <div class="flex items-center gap-1 w-full lg:w-auto lg:px-0">
        <span class="text-orange-600 hover:text-orange-400">{title}</span>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="3"
          stroke="currentColor"
          class="w-3 h-3 mt-0.5 group-open:rotate-180 text-orange-600 hover:text-orange-400">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M19.5 8.25l-7.5 7.5-7.5-7.5"></path>
        </svg>
      </div>
      <span class="text-xl line-clamp-2 font-bold"
        >${
          balance.toLocaleString("en-US", {
            maximumFractionDigits: 2,
            minimumFractionDigits: 2,
          })
        }</span
      >
    </button>
    <DropdownItems class="z-50 min-w-max">
      <div
        class:list={[
          "absolute w-[calc(w-screen - 30px)] min-w-max lg:w-[450px] z-50",
          "lg:right-0 origin-top-right right-1",
        ]}>
        <div
          class="px-3 lg:py-2 bg-slate-900 rounded-md shadow border flex gap-2 w-full justify-between border-r border-gray-300 z-50">
          <div class="text-white grid items-start">
            <span>ASSET BALANCES</span>
            <ul class="list-none grid items-center justify-start gap-1 text-xs">
              <li>BTC BALANCE: 100000</li>
              <li>ETH BALANCE: 0</li>
              <li>USDT BALANCE: 00</li>
            </ul>
          </div>
          <div class="grid text-white items-start justify-end gap-2">
            <span>SWITCH TO ACCOUNT</span>
            <button
              class="grid px-2 py-1 items-start text-clip justify-items-start justify-center gap-1 text-orange-600 hover:text-orange-400 bg-gray-700/50 hover:bg-slate-400/20 active:bg-slate-400/30"
              onclick={`${changeAccountType("demo")}`}>
              <span>{"Demo account"}</span>
              <span class="text-lg line-clamp-2 font-bold"
                >${
                  balance.toLocaleString("en-US", {
                    maximumFractionDigits: 2,
                    minimumFractionDigits: 2,
                  })
                }</span
              >
            </button>
            <button
              class="grid px-2 py-1 items-start justify-items-start justify-center gap-1 text-green-600 hover:text-green-400 bg-gray-700/50 hover:bg-slate-400/20 active:bg-slate-400/30"
              onclick={`${changeAccountType("live")}`}>
              <span>{"Live account"}</span>
              <span class="text-lg line-clamp-2 font-bold"
                >${
                  liveBalance.toLocaleString("en-US", {
                    maximumFractionDigits: 2,
                    minimumFractionDigits: 2,
                  })
                }</span
              >
            </button>
          </div>
        </div>
      </div>
    </DropdownItems>
  </DropdownContainer>
</div>
