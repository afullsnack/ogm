---
import DepositQR from "@components/DepositQr";
import DepositModal from "@components/ui/depositModal.astro";
import Icon from "astro-icon";
import { Dropdown as DropdownContainer, DropdownItems } from "astro-navbar";
import { changeAccountType } from "../../stores/dashboard";
const { title, lastItem, children } = Astro.props;
const balance = 10000;
const liveBalance = 0;
---

<div class="relative max-w-max w-[400px">
  <DropdownContainer class="group">
    <button
      class="grid items-start justify-items-start justify-center gap-1 text-gray-200 hover:text-gray-400">
      <div class="flex items-center gap-1 w-full lg:w-auto lg:px-0">
        <span class="text-orange-600 hover:text-orange-400">{title}</span>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="3"
          stroke="currentColor"
          class="w-3 h-3 mt-0.5 group-open:rotate-180 text-orange-600 hover:text-orange-400">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M19.5 8.25l-7.5 7.5-7.5-7.5"></path>
        </svg>
      </div>
      <span class="text-xl line-clamp-2 font-bold"
        >${
          balance.toLocaleString("en-US", {
            maximumFractionDigits: 2,
            minimumFractionDigits: 2,
          })
        }</span
      >
    </button>
    <DropdownItems class="w-auto">
      <div
        class:list={[
          "absolute w-[500px] lg:w-[450px] z-10",
          "lg:right-0 origin-top-right right-1",
        ]}>
        <div
          class="px-3 lg:py-2 bg-slate-900 rounded-md shadow border flex gap-2 w-full justify-between border-r border-gray-300">
          <div class="text-white grid items-start">
            <span>ASSET BALANCES</span>
            <ul class="list-none grid items-center justify-start gap-1 text-xs">
              <li>BTC BALANCE: 100000</li>
              <li>ETH BALANCE: 0</li>
              <li>USDT BALANCE: 00</li>
            </ul>
          </div>
          <div class="grid text-white items-start justify-end gap-2">
            <span>SWITCH TO ACCOUNT</span>
            <button
              class="grid px-2 py-1 items-start justify-items-start justify-center gap-1 text-orange-600 hover:text-orange-400 bg-gray-700/50 hover:bg-slate-400/20 active:bg-slate-400/30"
              onclick={`${changeAccountType("demo")}`}>
              <span>{title}</span>
              <span class="text-lg line-clamp-2 font-bold"
                >${
                  balance.toLocaleString("en-US", {
                    maximumFractionDigits: 2,
                    minimumFractionDigits: 2,
                  })
                }</span
              >
            </button>
            <!-- FLow for live button click bring up deposit modal with payment addresses and networks -->
            <DepositModal
              id="depositModal"
              open="Open modal"
              liveBalance={liveBalance}>
              <main
                slot="main"
                class="w-full grid items-start justify-items-start justify-center min-w-fit overflow-y-scroll h-full relative">
                <label class="grid items-start mt-10 gap-2">
                  <span
                    class="capitalize lg:text-lg font-bold text-xl mb-1 text-white"
                    >BTC DEPOSIT</span
                  >
                  <DepositQR
                    address={"3KSFShFwm27bGPhfXttPyUGL4kZEmD7E8G"}
                    client:only
                  />
                  <input
                    type="number"
                    class="bg-slate-800 w-[300px] border-gray-400/50 rounded-md caret-current border px-2 py-3 text-white outline-none font-medium"
                    placeholder="Enter amount to deposit"
                  />
                  <button
                    class="bg-blue-500 text-white hover:bg-blue-400 px-2 py-1 w-full h-10 active:bg-blue-600 tracking-wide mx-auto"
                    >I HAVE MADE THIS DEPOSIT</button
                  >
                </label>
                <label class="grid items-start mt-10 gap-2">
                  <span
                    class="capitalize lg:text-lg font-bold text-xl mb-1 text-white"
                    >ETH(ERC20) DEPOSIT</span
                  >
                  <DepositQR
                    address={"0x46c4fB880819F6a77433eF996d317Cc9ABc15391"}
                    client:only
                  />
                  <input
                    type="number"
                    class="bg-slate-800 w-[300px] border-gray-400/50 rounded-md caret-current border px-2 py-3 text-white outline-none font-medium"
                    placeholder="Enter amount to deposit"
                  />
                  <button
                    class="bg-blue-500 text-white hover:bg-blue-400 px-2 py-1 w-full h-10 active:bg-blue-600 tracking-wide mx-auto"
                    >I HAVE MADE THIS DEPOSIT</button
                  >
                </label>
                <label class="grid items-start mt-10 gap-2">
                  <span
                    class="capitalize lg:text-lg font-bold text-xl mb-1 text-white"
                    >USDT(ERC20) DEPOSIT</span
                  >
                  <DepositQR
                    address={"0x46c4fB880819F6a77433eF996d317Cc9ABc15391"}
                    client:only
                  />
                  <input
                    type="number"
                    class="bg-slate-800 w-[300px] border-gray-400/50 rounded-md caret-current border px-2 py-3 text-white outline-none font-medium"
                    placeholder="Enter amount to deposit"
                  />
                  <button
                    class="bg-blue-500 text-white hover:bg-blue-400 px-2 py-1 w-full h-10 active:bg-blue-600 tracking-wide mx-auto"
                    >I HAVE MADE THIS DEPOSIT</button
                  >
                </label>
              </main>
              <button
                slot="close"
                class="mx-auto text-center absolute right-0 top-1">
                <Icon
                  name="mdi:window-close"
                  class="h-10 w-10 text-slate-300"
                />
              </button>
            </DepositModal>
          </div>
        </div>
      </div>
    </DropdownItems>
  </DropdownContainer>
</div>
